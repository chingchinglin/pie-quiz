
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>你是哪一 PIE？</title>
  <style>
    body { font-family: "Noto Sans TC", sans-serif; background: #fff8f0; margin: 0; padding: 0; }
    header, main, footer { padding: 1.2rem; text-align: center; }
    .question, .result { display: none; margin-top: 2rem; }
    button { border: none; border-radius: 8px; cursor: pointer; transition: 0.2s ease; }
    .choices { display: flex; flex-direction: column; align-items: center; gap: 0.75rem; padding-top: 1rem; }
    .choice-btn { width: 90%; max-width: 400px; padding: 0.75rem; border-radius: 12px; background: #ffe5ec; font-size: 1.05rem; border: 1px solid #e4b1ab; cursor: pointer; }
    .choice-btn:hover { background: #ffcad4; }
    img.result-img { width: 90%; max-width: 420px; margin-top: 1.2rem; border-radius: 12px; }
    .result-actions { margin-top: 1.5rem; display: flex; flex-direction: column; align-items: center; gap: 1rem; }
  </style>
</head>
<body>
  <header>
    <img src="1.png" alt="PIE封面圖" style="max-width: 90%; height: auto; margin-bottom: 1rem; border-radius: 12px;" />
    <button onclick="startQuiz()" style="padding: 0.7rem 1.2rem; font-size: 1.1rem; background: #fcd5ce;">開始測驗</button>
  </header>

  <main id="quiz">
    <div class="question" id="questionBox">
      <h2 id="questionText"></h2>
      <div class="choices" id="choiceBox"></div>
    </div>
    <div class="result" id="resultBox">
      <img id="resultImg" class="result-img" src="" alt="result image">
      <div class="result-actions">
        <button onclick="window.open('https://www.junyiacademy.org/event/act-eng-prep-summer-25/', '_blank')" 
          style="background-color: #d0ebff; color: #003366; padding: 0.7rem 1rem; font-size: 1.05rem;">
          🎯 加入選手村
        </button>
        <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;">
          <button onclick="downloadResult()" 
            style="background-color: #fcd5ce; color: #000; padding: 0.7rem 1rem;">
            ⬇️ 下載圖片
          </button>
          <button onclick="location.reload()" 
            style="background-color: #dee2e6; color: #000; padding: 0.7rem 1rem;">
            🔄 再玩一次
          </button>
          <button onclick="copyLink()" 
            style="background-color: #caffbf; color: #000; padding: 0.7rem 1rem;">
            🔗 分享測驗
          </button>
        </div>
        <p id="copyMsg" style="display:none; color: green; font-size: 0.9rem;">✅ 已複製連結！</p>
      </div>
    </div>
  </main>

  <script>
    const questions = [{text:"問卷簡化以便展示",choices:[["💬","A"],["⚔️","B"],["🧠","C"],["📘","D"],["✍️","E"]]}];
    const results = {'💬':'2.png','⚔️':'3.png','🧠':'4.png','📘':'5.png','✍️':'6.png'};
    let current=0,counts={'💬':0,'⚔️':0,'🧠':0,'📘':0,'✍️':0};
    function startQuiz(){document.querySelector('header').style.display='none';showQ();}
    function showQ(){
      const q=questions[current],box=document.getElementById("choiceBox");
      document.getElementById("questionBox").style.display="block";
      document.getElementById("resultBox").style.display="none";
      document.getElementById("questionText").textContent=q.text;
      box.innerHTML="";
      q.choices.forEach(([e,t])=>{
        const b=document.createElement("button");
        b.className="choice-btn";b.innerHTML=`<span style="font-size:1.3rem">${e}</span> ${t}`;
        b.onclick=()=>choose(e);box.appendChild(b);
      });
    }
    function choose(e){counts[e]++;current++;current>=questions.length?showR():showQ();}
    function showR(){
      document.getElementById("questionBox").style.display="none";
      const top=Object.entries(counts).sort((a,b)=>b[1]-a[1])[0][0];
      document.getElementById("resultImg").src=results[top];
      document.getElementById("resultBox").style.display="block";
    }
    function downloadResult(){
      const img=document.getElementById("resultImg");
      const link=document.createElement("a");
      link.href=img.src;link.download="我的PIE結果.png";link.click();
    }
    function copyLink(){
      const link=window.location.href;
      navigator.clipboard.writeText(link).then(()=>{
        const msg=document.getElementById("copyMsg");
        msg.style.display="block";
        setTimeout(()=>{msg.style.display="none";},2000);
      });
    }
  </script>
</body>
</html>
