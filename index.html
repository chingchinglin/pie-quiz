<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>è‹±æ–‡å­¸ç¿’ï¼Œä½ æ˜¯å“ªä¸€ PIEï¼Ÿ</title>
  <style>
    /* ========================================== */
    /*       ä½¿ç”¨ <div> åšæˆé¸é …ï¼Œé¿å…åŸç”ŸæŒ‰éˆ•æ®˜å½±       */
    /* ========================================== */

    /* åŸºæœ¬æ’ç‰ˆèˆ‡å­—å‹ */
    body {
      font-family: "Noto Sans TC", sans-serif;
      background: #fff8f0;
      margin: 0;
      padding: 0;
    }
    header, main, footer {
      padding: 1rem;
      text-align: center;
    }

    /* é¦–é å¤§åœ–è¨­å®š */
    header img {
      width: 100%;
      max-width: 320px;
      height: auto;
      display: block;
      margin: 0 auto;
    }

    /* å•é¡Œå€èˆ‡çµæœå€ä¸€é–‹å§‹éƒ½éš±è— */
    .question, .result {
      display: none;
      margin-top: 2rem;
    }

    /* æ‰€æœ‰äº’å‹•å…ƒç´ ï¼ˆåŒ…å«é¸é …ï¼‰éƒ½ç”¨ cursor:pointerï¼Œé¿å…åŸç”Ÿ active è¡Œç‚º */
    .clickable {
      cursor: pointer;
      -webkit-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
      -webkit-appearance: none;
      appearance: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }

    /* é¸é …æŒ‰éˆ•ç¾¤çµ„ */
    .choices {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      padding-top: 1rem;
    }

    /* å°‡ <div class="choice-btn"> ç•¶æˆæŒ‰éˆ• */
    .choice-btn {
      width: 90%;
      max-width: 500px;
      padding: 0.75rem;
      border-radius: 12px;
      background: #ffe5ec;
      font-size: 1.05rem;
      border: 1px solid #e4b1ab;
      transition: 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .choice-btn span.emoji {
      font-size: 1.3rem;
      margin-right: 0.5rem;
    }
    /* æ»‘é¼ /æ‰‹æŒ‡æ‡¸åœæç¤º */
    .choice-btn:hover {
      background: #ffcad4;
    }
    /* æŒ‰ä¸‹æ™‚ï¼Œæš«æ™‚é™ä½é€æ˜åº¦ (æ›¿ä»£åŸç”Ÿçš„ç°è‰²æ®˜å½±) */
    .choice-btn:active {
      opacity: 0.7;
    }

    /* çµæœåœ–ç‰‡å¤§å°è¨­å®š */
    img.result-img {
      width: 100%;
      max-width: 420px;
      margin-top: 1.2rem;
      border-radius: 12px;
    }

    /* ã€Œçµæœã€æŒ‰éˆ•ç¾¤çµ„å€ */
    .result-actions {
      margin-top: 1.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }

    /* å¤§è¢å¹• (min-width: 768px) çš„é€²éšæ’ç‰ˆ */
    @media screen and (min-width: 768px) {
      body {
        font-size: 18px;
      }
      header img {
        max-width: 504px;
      }
      .question {
        max-width: 720px;
        margin: 2rem auto;
      }
      .result {
        max-width: 640px;
        margin: 2rem auto;
        font-size: 1.2rem;
      }
      .choice-btn {
        font-size: 1.15rem;
      }
      .result-actions button {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="1.png" alt="PIEå°é¢åœ–" style="max-width: 504px; height: auto; margin: 0 auto; display: block;"/>
    <div class="clickable" onclick="startQuiz()" style="display:inline-block; padding: 0.7rem 1.2rem; font-size: 1.1rem; background: #fcd5ce; border-radius: 8px;">
      é–‹å§‹æ¸¬é©—
    </div>
  </header>

  <main id="quiz">
    <div class="question" id="questionBox">
      <h2 id="questionText"></h2>
      <div class="choices" id="choiceBox"></div>
    </div>

    <div class="result" id="resultBox">
      <img id="resultImg" class="result-img" src="" alt="result image"/>
      <div class="result-actions">
        <div class="clickable" onclick="window.open('https://www.junyiacademy.org/event/act-eng-prep-summer-25/', '_blank')" style="background-color: #d0ebff; color: #003366; padding: 0.7rem 1rem; font-size: 1.05rem; border-radius: 8px;">
          ğŸ¯ åŠ å…¥ã€Œè‹±æ–‡å­¸æ¸¬é¸æ‰‹æ‘ã€ï¼Œæ‰¾å‡ºä½ çš„å­¸ç¿’æ´¾
        </div>
        <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;">
          <div class="clickable" onclick="copyImage()" style="background-color: #fcd5ce; color: #000; padding: 0.7rem 1rem; border-radius: 8px;">
            ğŸ“‹ è¤‡è£½åœ–ç‰‡
          </div>
          <div class="clickable" onclick="location.reload()" style="background-color: #dee2e6; color: #000; padding: 0.7rem 1rem; border-radius: 8px;">
            ğŸ”„ å†ç©ä¸€æ¬¡
          </div>
          <div class="clickable" onclick="copyLink()" style="background-color: #caffbf; color: #000; padding: 0.7rem 1rem; border-radius: 8px;">
            ğŸ”— åˆ†äº«æ¸¬é©—
          </div>
        </div>
        <p id="copyMsg" style="display:none; color: green; font-size: 0.9rem;">âœ… å·²è¤‡è£½é€£çµï¼</p>
      </div>
    </div>
  </main>

  <script>
    const questions = [
      {
        text: "å’ŒåŒå­¸è¸å…¥å¹³å¸¸å¸¸å»çš„æ—©é¤åº—ï¼Œçªç„¶ç™¼ç¾èœå–®æ”¹æˆè‹±æ–‡äº†!é€™æ™‚ä½ æœƒæ€éº¼é»é¤å‘¢ï¼Ÿ",
        choices: [
          ['ğŸ’¬', 'çœ‹ç…§ç‰‡æˆ–æ˜¯è·Ÿè‘—æœ‹å‹é»'],
          ['âš”ï¸', 'èªçœŸç ”ç©¶æ¯é“èœè‰²'],
          ['ğŸ§ ', 'é å°è±¡çŒœèœå–®æ„æ€'],
          ['ğŸ“˜', 'æ…¢æ…¢çœ‹å®Œå†æ±ºå®š'],
          ['âœï¸', 'è©¦è‘—å¯«ä¸‹ä¸€ä»½è‡ªå·±ç‰¹è£½çš„é¤é»']
        ]
      },
      {
        text: "çªç„¶æ”¶åˆ°æœ‹å‹ç”¨è‹±æ–‡ç™¼ä¾†çš„è¨Šæ¯ï¼Œä½ çš„å›æ‡‰æ˜¯ï¼Ÿ",
        choices: [
          ['ğŸ’¬', 'ç›´æ¥æ¨¡ä»¿å°æ–¹èªæ°£å›è¦†'],
          ['âš”ï¸', 'ç”¨ç¿»è­¯å·¥å…·ç¢ºèªå¥æ§‹æ­£ç¢º'],
          ['ğŸ§ ', 'å¿«é€ŸæŠ“å¹¾å€‹å–®å­—çŒœé‡é»'],
          ['ğŸ“˜', 'ä¸€å­—ä¸€å¥è®€å‡ºä¸Šä¸‹æ–‡é—œä¿‚'],
          ['âœï¸', 'å˜—è©¦ç”¨è‡ªå·±çš„å¥å‹å›ä¿¡ã€ç·¨å¯«æ¸…æ¥šå…§å®¹']
        ]
      },
      {
        text: "ä¸‹èª²å‰ï¼Œè€å¸«å‡ºäº†ä¸€ä»½è‹±æ–‡ä½œæ–‡ï¼Œå¾ˆå°‘å¯«è‹±æ–‡ä½œæ–‡çš„ä½ ï¼Œæœƒæ€éº¼è¾¦ï¼Ÿ",
        choices: [
          ['ğŸ’¬', 'æƒ³åƒå£èªªå…§å®¹ç›´æ¥å¯«'],
          ['âš”ï¸', 'å…ˆåˆ—ä¸»è©ï¼‹å‹•è©ï¼‹å—è©çµæ§‹'],
          ['ğŸ§ ', 'å…ˆæŒ‘å–®å­—åˆ—å‡ºå†æƒ³å¥å­'],
          ['ğŸ“˜', 'æ‰¾æ–‡ç« ç¯„ä¾‹æ¨¡ä»¿èªæ°£'],
          ['âœï¸', 'è‡ªå·±æ¶æ§‹æ–‡ç« é‚è¼¯ï¼Œé¸æ“‡å¥å‹èˆ‡æ®µè½é…ç½®']
        ]
      },
      {
        text: "ç¡è¦ºå‰çœ‹çœ‹ YouTube å­¸è‹±æ–‡å§ï¼å•Šï½ï½æœ‰ä¸€æ®µçœ‹ä¸æ‡‚è‹±æ–‡å¥å­ï¼Œé€™æ™‚ä½ æ€éº¼åšï¼Ÿ",
        choices: [
          ['ğŸ’¬', 'åè¦†è½å¹¾éæ¨¡ä»¿èªªå‡ºä¾†'],
          ['âš”ï¸', 'é€å¥æŠ„ä¸‹ä¾†è§£ææ–‡æ³•'],
          ['ğŸ§ ', 'å›è½é—œéµå–®å­—çŒœæ„æ€'],
          ['ğŸ“˜', 'é–‹å­—å¹•æ¯”å°ä¸Šä¸‹æ–‡'],
          ['âœï¸', 'è©¦è‘—æŠŠè½åˆ°çš„å…§å®¹è‡ªå·±ç”¨æ–‡å­—å¯«ä¸‹ä¾†æ•´ç†']
        ]
      },
      {
        text: "å­¸æœŸæœ«æœ‰ä¸€å ´è‹±æ–‡å°çµ„å ±å‘Šï¼Œä½ è² è²¬çš„éƒ¨åˆ†æ˜¯ï¼Ÿ",
        choices: [
          ['ğŸ’¬', 'ç­‰åŒå­¸å ±å‘Šä¾†ï¼Œæˆ‘è² è²¬å ±å‘Š'],
          ['âš”ï¸', 'ç ”ç©¶æ€éº¼è®“å ±å‘Šæ‹¿é«˜åˆ†çš„æŠ€å·§'],
          ['ğŸ§ ', 'æ‰¾è€å¸«æ›¾ç¶“è£œå……éçš„è³‡æ–™'],
          ['ğŸ“˜', 'æŠŠå¤§å®¶è³‡æ–™å½™æ•´èµ·ä¾†'],
          ['âœï¸', 'çµ±æ•´å¤§å®¶çš„è³‡æ–™èˆ‡æ ¡å°å…§å®¹']
        ]
      },
      {
        text: "æœŸå¾…å·²ä¹…çš„æš‘å‡çµ‚æ–¼ä¾†äº†ï¼è·ŸåŒå­¸å‡ºå»ç©ï¼Œè¿é¢è€Œä¾†çš„å¤–åœ‹äººå°ä½ é–‹å£æ‰“æ‹›å‘¼ï¼Œé€™æ™‚ä½ æœƒï¼Ÿ",
        choices: [
          ['ğŸ’¬', 'å…ˆè¬›å†èªªï¼Œèƒ½æºé€šå°±å¥½'],
          ['âš”ï¸', 'æƒ³å¥å‹æƒ³å¤ªä¹…è¬›ä¸å‡ºå£'],
          ['ğŸ§ ', 'å…ˆæŠŠæœƒçš„å–®å­—å¡é€²å»'],
          ['ğŸ“˜', 'è®“æˆ‘å›æƒ³ä¸€ä¸‹ä¹‹å‰çœ‹éçš„å°è©±ç¯„ä¾‹'],
          ['âœï¸', 'é»˜é»˜åœ¨å¿ƒè£¡é‡çµ„å¥å­ï¼Œæƒ³è‘—æ€éº¼ç”¨æ–‡å­—ä¾†è¡¨é”æœƒæ›´é †']
        ]
      }
    ];

    const results = {
      'ğŸ’¬': '2.png',
      'âš”ï¸': '3.png',
      'ğŸ§ ': '4.png',
      'ğŸ“˜': '5.png',
      'âœï¸': '6.png'
    };

    let current = 0;
    let counts = { 'ğŸ’¬': 0, 'âš”ï¸': 0, 'ğŸ§ ': 0, 'ğŸ“˜': 0, 'âœï¸': 0 };

    function startQuiz() {
      document.querySelector('header').style.display = 'none';
      document.getElementById('quiz').style.display = 'block';
      showQuestion();
    }

    function showQuestion() {
      const qBox = document.getElementById('questionBox');
      const qText = document.getElementById('questionText');
      const cBox = document.getElementById('choiceBox');
      const q = questions[current];

      qBox.style.display = 'block';
      document.getElementById('resultBox').style.display = 'none';

      cBox.innerHTML = '';
      document.activeElement?.blur(); // æ¸…é™¤å…ˆå‰å…ƒç´ ç„¦é»

      qText.textContent = q.text;
      q.choices.forEach(([emoji, desc]) => {
        const div = document.createElement('div');
        div.className = 'choice-btn clickable';
        div.innerHTML = `<span class="emoji">${emoji}</span><span>${desc}</span>`;
        div.onclick = () => {
          choose(emoji);
        };
        cBox.appendChild(div);
      });
    }

    function choose(choice) {
      counts[choice]++;
      current++;

      setTimeout(() => {
        document.activeElement?.blur(); // å»¶é²å†æ¸…é™¤ä¸€æ¬¡ç„¦é»
      }, 10);

      if (current >= questions.length) {
        showResult();
      } else {
        showQuestion();
      }
    }

    function showResult() {
      document.getElementById('questionBox').style.display = 'none';
      const top = Object.entries(counts).sort((a, b) => b[1] - a[1])[0][0];
      const resultImg = results[top];
      document.getElementById('resultImg').src = resultImg;
      document.getElementById('resultBox').style.display = 'block';
    }

    function downloadResult() {
      const img = document.getElementById('resultImg');
      const link = document.createElement('a');
      link.href = img.src;
      link.download = 'æˆ‘çš„PIEçµæœ.png';
      link.click();
    }

    function copyLink() {
      const link = window.location.href;
      navigator.clipboard.writeText(link).then(() => {
        const msg = document.getElementById('copyMsg');
        msg.style.display = 'block';
        setTimeout(() => { msg.style.display = 'none'; }, 2000);
      });
    }

    // æ–°å¢ï¼šè¤‡è£½çµæœåœ–ç‰‡åˆ°å‰ªè²¼ç°¿
    async function copyImage() {
      try {
        const img = document.getElementById('resultImg');
        const response = await fetch(img.src);
        const blob = await response.blob();
        const item = new ClipboardItem({ [blob.type]: blob });
        await navigator.clipboard.write([item]);
        alert('åœ–ç‰‡å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼å¯åœ¨ç¤¾ç¾¤æˆ–ç›¸ç°¿ä¸­è²¼ä¸Šã€‚');
      } catch (err) {
        console.error('è¤‡è£½å¤±æ•—ï¼š', err);
        downloadResult(); // è¤‡è£½å¤±æ•—æ™‚é™å›ä¸‹è¼‰
      }
    }
  </script>
</body>
</html>
